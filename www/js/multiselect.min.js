!function(t){var e={columns:1,search:!1,searchOptions:{delay:250,showOptGroups:!1,searchText:!0,searchValue:!1,onSearch:function(t){}},texts:{placeholder:"Select options",search:"Search",searchNoResult:"No results",selectedOptions:" selected",selectAll:"Select all",unselectAll:"Unselect all",noneSelected:"None Selected"},selectAll:!1,selectGroup:!1,minHeight:200,maxHeight:null,maxWidth:null,maxPlaceholderWidth:null,maxPlaceholderOpts:10,showCheckbox:!0,checkboxAutoFit:!0,optionAttributes:[],replacePlaceholderText:!0,onLoad:function(t){},onOptionClick:function(t,e){},onControlOpen:function(t){},onControlClose:function(t){},onSelectAll:function(t,e){},onPlaceholder:function(t,e,s){}},s=1,o=1;function i(o,i){if(this.element=o,this.options=t.extend(!0,{},e,i),this.updateSelectAll=!0,this.updatePlaceholder=!0,this.listNumber=s,s+=1,!t(this.element).attr("multiple"))throw Error("[jQuery-MultiSelect] Select list must be a multiselect list in order to use this plugin");if(this.options.search&&!this.options.searchOptions.searchText&&!this.options.searchOptions.searchValue)throw Error("[jQuery-MultiSelect] Either searchText or searchValue should be true.");"placeholder"in this.options&&(this.options.texts.placeholder=this.options.placeholder,delete this.options.placeholder),"default"in this.options.searchOptions&&(this.options.texts.search=this.options.searchOptions.default,delete this.options.searchOptions.default),this.load()}"function"!=typeof Array.prototype.map&&(Array.prototype.map=function(e,s){return void 0===s&&(s=this),t.isArray(s)?t.map(s,e):[]}),"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),i.prototype={load:function(){var e=this;if("SELECT"!=e.element.nodeName||t(e.element).hasClass("jqmsLoaded"))return!0;t(e.element).addClass("jqmsLoaded ms-list-"+e.listNumber).data("plugin_multiselect-instance",e),t(e.element).after('<div id="ms-list-'+e.listNumber+'" class="ms-options-wrap"><button type="button"><span>None Selected</span></button><div class="ms-options"><ul></ul></div></div>');var s=t(e.element).siblings("#ms-list-"+e.listNumber+".ms-options-wrap").find("> button:first-child"),o=t(e.element).siblings("#ms-list-"+e.listNumber+".ms-options-wrap").find("> .ms-options"),i=o.find("> ul");if(e.options.showCheckbox?e.options.checkboxAutoFit&&o.addClass("checkbox-autofit"):o.addClass("hide-checkbox"),t(e.element).prop("disabled")&&s.prop("disabled",!0),e.options.maxPlaceholderWidth&&s.css("maxWidth",e.options.maxPlaceholderWidth),e.options.maxHeight)var n=e.options.maxHeight;else var n=t(window).height()-o.offset().top+t(window).scrollTop()-20;if(n=n<e.options.minHeight?e.options.minHeight:n,o.css({maxWidth:e.options.maxWidth,minHeight:e.options.minHeight,maxHeight:n}),o.on("touchmove mousewheel DOMMouseScroll",function(e){if(t(this).outerHeight()<t(this)[0].scrollHeight){var s=e.originalEvent,o=s.wheelDelta||-s.detail;t(this).outerHeight()+t(this)[0].scrollTop>t(this)[0].scrollHeight&&(e.preventDefault(),this.scrollTop+=o<0?1:-1)}}),t(document).off("click.ms-hideopts").on("click.ms-hideopts",function(e){t(e.target).closest(".ms-options-wrap").length||t(".ms-options-wrap.ms-active > .ms-options").each(function(){t(this).closest(".ms-options-wrap").removeClass("ms-active");var e=t(this).closest(".ms-options-wrap").attr("id"),s=t(this).parent().siblings("."+e+".jqmsLoaded").data("plugin_multiselect-instance");"function"==typeof s.options.onControlClose&&s.options.onControlClose(s.element)})}).on("keydown",function(e){27==(e.keyCode||e.which)&&t(this).trigger("click.ms-hideopts")}),s.on("keydown",function(t){var e=t.keyCode||t.which;(13==e||32==e)&&s.trigger("mousedown")}),s.on("mousedown",function(s){if(s.which&&1!=s.which)return!0;if(t(".ms-options-wrap.ms-active").each(function(){if(t(this).siblings("."+t(this).attr("id")+".jqmsLoaded")[0]!=o.parent().siblings(".ms-list-"+e.listNumber+".jqmsLoaded")[0]){t(this).removeClass("ms-active");var s=t(this).siblings("."+t(this).attr("id")+".jqmsLoaded").data("plugin_multiselect-instance");"function"==typeof s.options.onControlClose&&s.options.onControlClose(s.element)}}),o.closest(".ms-options-wrap").toggleClass("ms-active"),o.closest(".ms-options-wrap").hasClass("ms-active")){if("function"==typeof e.options.onControlOpen&&e.options.onControlOpen(e.element),o.css("maxHeight",""),e.options.maxHeight)var i=e.options.maxHeight;else var i=t(window).height()-o.offset().top+t(window).scrollTop()-20;i&&(i=i<e.options.minHeight?e.options.minHeight:i,o.css("maxHeight",i))}else"function"==typeof e.options.onControlClose&&e.options.onControlClose(e.element)}).click(function(t){t.preventDefault()}),e.options.texts.placeholder&&s.find("span").text(e.options.texts.placeholder),e.options.search){i.before('<div class="ms-search"><input type="text" value="" placeholder="'+e.options.texts.search+'" /></div>'),i.after('<div class="no-result-message">'+e.options.texts.searchNoResult+"</div>");var l=o.find(".ms-search input");l.on("keyup",function(){if(t(this).data("lastsearch")==t(this).val())return!0;t(this).data("searchTimeout")&&clearTimeout(t(this).data("searchTimeout"));var s=t(this);t(this).data("searchTimeout",setTimeout(function(){s.data("lastsearch",s.val()),"function"==typeof e.options.searchOptions.onSearch&&e.options.searchOptions.onSearch(e.element);var o=t.trim(l.val().toLowerCase());o?(i.find('li[data-search-term*="'+o+'"]:not(.optgroup)').removeClass("ms-hidden"),i.find('li:not([data-search-term*="'+o+'"], .optgroup)').addClass("ms-hidden")):i.find(".ms-hidden").removeClass("ms-hidden"),e.options.searchOptions.showOptGroups||i.find(".optgroup").each(function(){t(this).find("li:not(.ms-hidden)").length?t(this).show():t(this).hide()}),e._updateSelectAllText()},e.options.searchOptions.delay))})}e.options.selectAll&&i.before('<a href="#" class="ms-selectall global">'+e.options.texts.selectAll+"</a>"),o.on("click",".ms-selectall",function(s){s.preventDefault(),e.updateSelectAll=!1,e.updatePlaceholder=!1;var n=o.parent().siblings(".ms-list-"+e.listNumber+".jqmsLoaded");if(t(this).hasClass("global"))i.find('li:not(.optgroup, .selected, .ms-hidden) input[type="checkbox"]:not(:disabled)').length?(i.find('li:not(.optgroup, .selected, .ms-hidden) input[type="checkbox"]:not(:disabled)').closest("li").addClass("selected"),i.find('li.selected input[type="checkbox"]:not(:disabled)').prop("checked",!0)):(i.find('li:not(.optgroup, .ms-hidden).selected input[type="checkbox"]:not(:disabled)').closest("li").removeClass("selected"),i.find('li:not(.optgroup, .ms-hidden, .selected) input[type="checkbox"]:not(:disabled)').prop("checked",!1));else if(t(this).closest("li").hasClass("optgroup")){var l=t(this).closest("li.optgroup");l.find('li:not(.selected, .ms-hidden) input[type="checkbox"]:not(:disabled)').length?(l.find('li:not(.selected, .ms-hidden) input[type="checkbox"]:not(:disabled)').closest("li").addClass("selected"),l.find('li.selected input[type="checkbox"]:not(:disabled)').prop("checked",!0)):(l.find('li:not(.ms-hidden).selected input[type="checkbox"]:not(:disabled)').closest("li").removeClass("selected"),l.find('li:not(.ms-hidden, .selected) input[type="checkbox"]:not(:disabled)').prop("checked",!1))}var a=[];i.find('li.selected input[type="checkbox"]').each(function(){a.push(t(this).val())}),n.val(a).trigger("change"),e.updateSelectAll=!0,e.updatePlaceholder=!0,"function"==typeof e.options.onSelectAll&&e.options.onSelectAll(e.element,a.length),e._updateSelectAllText(),e._updatePlaceholderText()});var a=[];t(e.element).children().each(function(){if("OPTGROUP"==this.nodeName){var s=[];t(this).children("option").each(function(){for(var o={},i=0;i<e.options.optionAttributes.length;i++){var n=e.options.optionAttributes[i];void 0!==t(this).attr(n)&&(o[n]=t(this).attr(n))}s.push({name:t(this).text(),value:t(this).val(),checked:t(this).prop("selected"),attributes:o})}),a.push({label:t(this).attr("label"),options:s})}else{if("OPTION"!=this.nodeName)return!0;for(var o={},i=0;i<e.options.optionAttributes.length;i++){var n=e.options.optionAttributes[i];void 0!==t(this).attr(n)&&(o[n]=t(this).attr(n))}a.push({name:t(this).text(),value:t(this).val(),checked:t(this).prop("selected"),attributes:o})}}),e.loadOptions(a,!0,!1),o.on("click",'input[type="checkbox"]',function(){t(this).closest("li").toggleClass("selected"),o.parent().siblings(".ms-list-"+e.listNumber+".jqmsLoaded").find('option[value="'+e._escapeSelector(t(this).val())+'"]').prop("selected",t(this).is(":checked")).closest("select").trigger("change"),"function"==typeof e.options.onOptionClick&&e.options.onOptionClick(e.element,this),e._updateSelectAllText(),e._updatePlaceholderText()}),"function"==typeof e.options.onLoad&&e.options.onLoad(e.element),t(e.element).hide()},loadOptions:function(e,s,o){s="boolean"!=typeof s||s,o="boolean"!=typeof o||o;var i=t(this.element),n=i.siblings("#ms-list-"+this.listNumber+".ms-options-wrap").find("> .ms-options > ul"),l=i.siblings("#ms-list-"+this.listNumber+".ms-options-wrap").find("> .ms-options");s&&(n.find("> li").remove(),o&&i.find("> *").remove());var a=[];for(var p in e)if(e.hasOwnProperty(p)){var c=e[p],h=t("<li/>"),r=!0;if(c.hasOwnProperty("value")){if(this.options.showCheckbox&&this.options.checkboxAutoFit&&h.addClass("ms-reflow"),this._addOption(h,c),o){var d=t("<option/>",{value:c.value,text:c.name});c.hasOwnProperty("attributes")&&Object.keys(c.attributes).length&&d.attr(c.attributes),c.checked&&d.prop("selected",!0),i.append(d)}}else{if(!c.hasOwnProperty("options"))continue;var u=t("<optgroup/>",{label:c.label});for(var m in n.find("> li.optgroup > span.label").each(function(){t(this).text()==c.label&&(h=t(this).closest(".optgroup"),r=!1)}),o&&(i.find('optgroup[label="'+c.label+'"]').length?u=i.find('optgroup[label="'+c.label+'"]'):i.append(u)),r&&(h.addClass("optgroup"),h.append('<span class="label">'+c.label+"</span>"),h.find("> .label").css({clear:"both"}),this.options.selectGroup&&h.append('<a href="#" class="ms-selectall">'+this.options.texts.selectAll+"</a>"),h.append("<ul/>")),c.options){if(c.options.hasOwnProperty(m)){var f=c.options[m],b=t("<li/>");if(this.options.showCheckbox&&this.options.checkboxAutoFit&&b.addClass("ms-reflow"),f.hasOwnProperty("value")&&(this._addOption(b,f),h.find("> ul").append(b),o)){var d=t("<option/>",{value:f.value,text:f.name});f.hasOwnProperty("attributes")&&Object.keys(f.attributes).length&&d.attr(f.attributes),f.checked&&d.prop("selected",!0),u.append(d)}}}}r&&a.push(h)}if(n.append(a),this.options.checkboxAutoFit&&this.options.showCheckbox&&!l.hasClass("hide-checkbox")){var g=n.find('.ms-reflow:eq(0) input[type="checkbox"]');if(g.length){var v=g.outerWidth();v=v||15,n.find(".ms-reflow label").css("padding-left",2*parseInt(g.closest("label").css("padding-left"))+v),n.find(".ms-reflow").removeClass("ms-reflow")}}this._updatePlaceholderText(),l.find("ul").css({"column-count":"","column-gap":"","-webkit-column-count":"","-webkit-column-gap":"","-moz-column-count":"","-moz-column-gap":""}),i.find("optgroup").length?(n.find("> li:not(.optgroup)").css({float:"left",width:100/this.options.columns+"%"}),n.find("li.optgroup").css({clear:"both"}).find("> ul").css({"column-count":this.options.columns,"column-gap":0,"-webkit-column-count":this.options.columns,"-webkit-column-gap":0,"-moz-column-count":this.options.columns,"-moz-column-gap":0}),this._ieVersion()&&10>this._ieVersion()&&n.find("li.optgroup > ul > li").css({float:"left",width:100/this.options.columns+"%"})):(n.css({"column-count":this.options.columns,"column-gap":0,"-webkit-column-count":this.options.columns,"-webkit-column-gap":0,"-moz-column-count":this.options.columns,"-moz-column-gap":0}),this._ieVersion()&&10>this._ieVersion()&&n.find("> li").css({float:"left",width:100/this.options.columns+"%"})),this._updateSelectAllText()},settings:function(e){this.options=t.extend(!0,{},this.options,e),this.reload()},unload:function(){t(this.element).siblings("#ms-list-"+this.listNumber+".ms-options-wrap").remove(),t(this.element).show(function(){t(this).css("display","").removeClass("jqmsLoaded")})},reload:function(){t(this.element).siblings("#ms-list-"+this.listNumber+".ms-options-wrap").remove(),t(this.element).removeClass("jqmsLoaded"),this.load()},reset:function(){var e=[];t(this.element).find("option").each(function(){t(this).prop("defaultSelected")&&e.push(t(this).val())}),t(this.element).val(e),this.reload()},disable:function(e){e="boolean"!=typeof e||e,t(this.element).prop("disabled",e),t(this.element).siblings("#ms-list-"+this.listNumber+".ms-options-wrap").find("button:first-child").prop("disabled",e)},_updateSelectAllText:function(){if(this.updateSelectAll){var e=this;if(e.options.selectAll||e.options.selectGroup){var s=t(e.element).siblings("#ms-list-"+e.listNumber+".ms-options-wrap").find("> .ms-options");s.find(".ms-selectall").each(function(){var s=t(this).parent().find("li:not(.optgroup,.selected,.ms-hidden)");t(this).text(s.length?e.options.texts.selectAll:e.options.texts.unselectAll)});var o=s.find("> ul li:not(.optgroup,.ms-hidden)").length;s.find(".no-result-message").toggle(!o),s.find(".ms-selectall.global").toggle(!!o)}}},_updatePlaceholderText:function(){if(this.updatePlaceholder){var e=t(this.element),s=e.val()?e.val():[],o=e.siblings("#ms-list-"+this.listNumber+".ms-options-wrap").find("> button:first-child"),i=o.find("span"),n=e.siblings("#ms-list-"+this.listNumber+".ms-options-wrap").find("> .ms-options");e.find("option:selected:disabled").length&&(s=[],e.find("option:selected").each(function(){s.push(t(this).val())}));var l=[];for(var a in s)if(s.hasOwnProperty(a)&&(l.push(t.trim(e.find('option[value="'+this._escapeSelector(s[a])+'"]').text())),l.length>=this.options.maxPlaceholderOpts))break;i.text(l.join(", ")),l.length?(n.closest(".ms-options-wrap").addClass("ms-has-selections"),"function"==typeof this.options.onPlaceholder&&this.options.onPlaceholder(this.element,i,l)):n.closest(".ms-options-wrap").removeClass("ms-has-selections"),l.length?this.options.replacePlaceholderText&&(i.width()>o.width()||l.length!=s.length)&&i.text(s.length+this.options.texts.selectedOptions):i.text(this.options.texts.placeholder)}},_addOption:function(e,s){var i=t("<div/>").html(s.name).text(),n=t("<label/>",{for:"ms-opt-"+o}).text(i),l=t("<input>",{type:"checkbox",id:"ms-opt-"+o,value:s.value});s.hasOwnProperty("attributes")&&Object.keys(s.attributes).length&&l.attr(s.attributes),s.checked&&(e.addClass("default selected"),l.prop("checked",!0)),n.prepend(l);var a="";this.options.searchOptions.searchText&&(a+=" "+i.toLowerCase()),this.options.searchOptions.searchValue&&(a+=" "+s.value.toLowerCase()),e.attr("data-search-term",t.trim(a)).prepend(n),o+=1},_ieVersion:function(){var t=navigator.userAgent.toLowerCase();return -1!=t.indexOf("msie")&&parseInt(t.split("msie")[1])},_escapeSelector:function(e){return"function"==typeof t.escapeSelector?t.escapeSelector(e):e.replace(/[!"#$%&'()*+,.\/:;<=>?@[\\\]^`{|}~]/g,"\\$&")}},t.fn.multiselect=function(e){if(this.length){var s,o=arguments;return void 0===e||"object"==typeof e?this.each(function(){t.data(this,"plugin_multiselect")||t.data(this,"plugin_multiselect",new i(this,e))}):"string"==typeof e&&"_"!==e[0]&&"init"!==e?(this.each(function(){var n=t.data(this,"plugin_multiselect");n instanceof i&&"function"==typeof n[e]&&(s=n[e].apply(n,Array.prototype.slice.call(o,1))),"unload"===e&&t.data(this,"plugin_multiselect",null)}),s):void 0}}}(jQuery);